{"ast":null,"code":"var _jsxFileName = \"/Users/mattrmorlan/UIC/course-work/FitnessTrackr_FrontEnd/src/components/Register.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BASE_URL = 'http://fitnesstrac-kr.herokuapp.com/api';\n\nconst Register = ({\n  curentUser,\n  setCurrentUser\n}) => {\n  _s();\n\n  let [newUsername, setNewUsername] = useState('');\n  let [newPassword, setNewPassword] = useState('');\n  let [message, setMessage] = useState('');\n  let [errorMessage, setErrorMessage] = useState('');\n\n  async function register() {\n    let newUser = {\n      username: newUsername,\n      password: newPassword\n    };\n\n    try {\n      let response = (await axios.post(BASE_URL + '/users/register', newUser)).data;\n      console.log(response);\n      localStorage.setItem('currentUserToken', response.token);\n      localStorage.setItem('currentUser', newUsername);\n      setCurrentUser(newUser.username);\n      setMessage(\"You are currently logged in as \" + currentUser);\n      return currentUser;\n    } catch (error) {\n      console.error(error);\n      console.log(\"invalid entry\");\n      setErrorMessage(\"Invalid username and password combination. Please try again.\");\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: !currentUser ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Please enter your new username and password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: event => {\n          event.preventDefault();\n          register();\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"username-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"username-input\",\n            name: \"username-input\",\n            placeholder: \"Username\",\n            onChange: event => {\n              setNewUsername(event.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            // type=\"password\" \n            id: \"password-input\",\n            name: \"password-input\",\n            placeholder: \"Password\",\n            onChange: event => {\n              setNewPassword(event.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)\n    }, void 0, false)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Register, \"4/COft99fBJyhc6x2ore2VTbOJg=\");\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["/Users/mattrmorlan/UIC/course-work/FitnessTrackr_FrontEnd/src/components/Register.js"],"names":["React","useState","axios","BASE_URL","Register","curentUser","setCurrentUser","newUsername","setNewUsername","newPassword","setNewPassword","message","setMessage","errorMessage","setErrorMessage","register","newUser","username","password","response","post","data","console","log","localStorage","setItem","token","currentUser","error","event","preventDefault","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\n\nconst BASE_URL = 'http://fitnesstrac-kr.herokuapp.com/api';\n\nconst Register = ({curentUser, setCurrentUser}) => {\n    let [newUsername, setNewUsername] = useState('')\n    let [newPassword, setNewPassword] = useState('')\n    let [message, setMessage] = useState('');\n    let [errorMessage, setErrorMessage] = useState('');\n\n    async function register() {\n        let newUser = {username: newUsername, password: newPassword}\n\n        try {\n            let response = (await axios.post(BASE_URL+'/users/register', newUser)).data;\n            console.log(response)\n            localStorage.setItem('currentUserToken', response.token)\n    \n            localStorage.setItem('currentUser', newUsername)\n            setCurrentUser(newUser.username);\n            setMessage(\"You are currently logged in as \" + currentUser)\n\n            return currentUser\n         \n        } catch (error) {\n            console.error(error);\n            console.log(\"invalid entry\")\n            setErrorMessage(\"Invalid username and password combination. Please try again.\");\n\n        }\n\n    }\n\n    return(\n        <div>\n            { !currentUser ? \n            <>\n    <h1>Please enter your new username and password</h1>\n        <form onSubmit={(event) => {\n                event.preventDefault();\n                register()\n                \n            }}>  \n                <div>\n                    <label htmlFor=\"username-input\"></label>\n                    <input \n                        type=\"text\" \n                        id=\"username-input\"\n                        name=\"username-input\" \n                        placeholder=\"Username\"\n                        onChange={(event) => {\n                            setNewUsername(event.target.value)\n                        }}\n                        ></input>\n                </div>\n                <div>\n                    <label htmlFor=\"password-input\"></label>\n                    <input \n                        // type=\"password\" \n                        id=\"password-input\"\n                        name=\"password-input\" \n                        placeholder=\"Password\"\n                        onChange={(event) => {\n                            setNewPassword(event.target.value)\n                        }}\n                        ></input>\n                    </div>\n                <button type='submit'>Submit</button>\n            </form>\n        <h1>{errorMessage}</h1>\n        </> : <><h1>{message}</h1></> }\n        </div>\n    )\n}\n\nexport default Register"]},"metadata":{},"sourceType":"module"}